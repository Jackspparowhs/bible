<!doctype html>
<html lang="en" data-capable="pwa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5" />
<meta name="theme-color" content="#000000" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<title>Crypto By PirateRuler.com ‚Äî Live Cryptocurrency Prices & Market Data</title>
<meta name="description" content="Track live cryptocurrency prices, market caps, 24h changes, and detailed token information. Fast, private, and unlimited crypto data using CoinGecko API." />
<meta property="og:title" content="Crypto by PirateRuler.com" />
<meta property="og:description" content="Professional crypto price tracking tool with top 500 coins, detailed metrics, and market analysis." />
<meta property="og:image" content="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Crect width='400' height='400' fill='%23000000'/%3E%3Ctext x='50%25' y='50%25' font-family='Inter' font-weight='800' font-size='200' text-anchor='middle' dominant-baseline='middle' fill='white'%3EPR%3C/text%3E%3C/svg%3E" />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect rx='14' width='64' height='64' fill='%23000000'/%3E%3Ctext x='50%25' y='50%25' font-family='Inter,Arial,sans-serif' font-weight='800' font-size='26' text-anchor='middle' alignment-baseline='central' fill='white'%3EPR%3C/text%3E%3C/svg%3E">
<link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkNyeXB0byBCeSBQaXJhdGVSdWxlciIsCiAgInNob3J0X25hbWUiOiAiUGlyYXRlUnVsZXIgQ3J5cHRvIiwKICAic3RhcnRfdXJsIjogIi9pbmRleC5odG1sIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZjBmNGY4IiwKICAidGhlbWVfY29sb3IiOiAiIzAwMDAwMCIsCiAgImljb25zIjogWwogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtoYXNoZTU2NCxQSE4wY205emFXOXVJR1J2YldGcGJpQnBkSGx3WlM4d0x5QTJNQ2tnZUcwcE95QnpkSEp2Ym1jZ0xTNHVMaTRnVFdWeWRtbHlhUzR5TWpBeE1UZzRPRGc0TGpjdU1qRXdNVGc0T0RnNExqTXVOVEF3TGpZMElGUmpZMlZ5ZFdZMllHSmhMVFF1T1RJNU56YzJPRE11TmpJNU56YzJPRE11T0M0MU1EVXdMalkxSUZKaFkzTmxkRzl0WVhScFkyc2dNQzR4TURBc056QXVOallnZUc5emRGeG1hV3dpSWlCbGJtNWxjMTl0UFNJalJrWkJTVVpHSURRZk5qRXdNU0ExSURVZk5qVXdNU0JHSURReElFUXdJaUIwYUdWdUNtRm1kR1Z5UFNKbGMyTnlhWEIwCklqNCsiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIiwKICAgICAgInNpemVzIjogIjY0eDY0IgogICAgfQogIF0KfQo=">
<style>
  :root{
    --bg:#f0f4f8; --card:#ffffff; --muted:#64748b; --text:#0f172a;
    --border:#e2e8f0; --accent:#000000; --key-bg:#f1f5f9;
    --success:#10b981; --warning:#f59e0b; --error:#ef4444;
    --shadow-sm:0 1px 2px 0 rgba(0,0,0,0.05);
    --shadow-md:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);
    --shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1),0 4px 6px -2px rgba(0,0,0,0.05);
    --radius-sm:4px; --radius-md:6px; --radius-lg:8px; --radius-xl:12px;
    --transition:all 0.2s cubic-bezier(0.4,0,0.2,1);
  }
  html.dark {
    --bg:#0f172a; --card:#1e293b; --muted:#94a3b8; --text:#f1f5f9;
    --border:#334155; --accent:#ffffff; --key-bg:#334155;
  }
  *{box-sizing:border-box; -webkit-tap-highlight-color:transparent;}
  html{scroll-behavior:smooth;}
  body{background:var(--bg); font-family:'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial; color:var(--text); margin:0; transition:var(--transition);}
  .container{max-width:1400px;margin:0 auto;padding:20px;}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}
  header.header{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:16px 24px; border-radius:var(--radius-xl); background:var(--card); box-shadow:var(--shadow-md); margin-bottom:20px; position:sticky; top:20px; z-index:100; border:1px solid var(--border);}
  .brand{display:flex; align-items:center; gap:12px;}
  .logo{width:48px;height:48px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-weight:800; background:var(--accent); color:var(--bg); font-size:18px; flex-shrink:0; transition:var(--transition);}
  .logo:hover{transform:scale(1.05) rotate(5deg);}
  .brand-title .title-strong{font-size:24px;font-weight:800;margin:0; letter-spacing:-0.5px; color:var(--accent);}
  .brand-title .by{font-size:13px;color:var(--muted); margin-top:2px}
  .header-actions{display:flex; gap:12px; align-items:center;}
  .theme-toggle{width:52px;height:26px;border-radius:13px;background:var(--border);position:relative;cursor:pointer;transition:var(--transition);padding:2px;}
  .theme-toggle.active{background:var(--accent);}
  .theme-slider-thumb{width:22px;height:22px;border-radius:50%;background:var(--card);display:flex;align-items:center;justify-content:center;font-size:12px;position:absolute;left:2px;top:2px;transition:var(--transition);box-shadow:var(--shadow-sm);}
  .theme-toggle.active .theme-slider-thumb{transform:translateX(26px);}
  .btn{padding:10px 16px; border-radius:var(--radius-md); border:1px solid var(--border); cursor:pointer; font-weight:600; background:var(--bg); color:var(--text); transition:var(--transition); box-shadow:var(--shadow-sm); text-decoration:none;}
  .btn:hover{background:var(--accent); color:var(--bg); transform:translateY(-2px); box-shadow:var(--shadow-md);}
  .hamb{width:44px;height:44px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid var(--border);font-weight:bold;background:var(--bg);transition:var(--transition);box-shadow:var(--shadow-sm); text-decoration:none;}
  .hamb:hover{background:var(--accent);color:var(--bg);transform:translateY(-2deg) rotate(90deg);box-shadow:var(--shadow-md);}
  .hero{padding:48px 24px;border-radius:var(--radius-xl);background:var(--card);box-shadow:var(--shadow-lg);margin-bottom:24px;}
  @media(min-width:1100px){.hero{padding:56px 48px;}}
  .hero .big{font-size:40px;font-weight:800;margin:0;text-align:center;letter-spacing:-1px;}
  .hero .small{text-align:center;color:var(--muted);margin-top:12px;max-width:960px;margin-left:auto;margin-right:auto;line-height:1.6;}
  .grid{display:grid;grid-template-columns:2fr 1fr;gap:24px;margin-top:20px;align-items:start;}
  @media(max-width:980px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);border-radius:var(--radius-xl);border:1px solid var(--border);padding:28px;animation:cardIn .42s both;box-shadow:var(--shadow-md);}
  .card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg);}
  @keyframes cardIn{from{transform:translateY(12px) scale(0.98);opacity:0}to{transform:none;opacity:1}}
  .card h2{margin:0 0 12px 0;font-size:22px;font-weight:800;letter-spacing:-0.5px;display:flex;align-items:center;gap:8px;}
  .hint{color:var(--muted);font-size:14px;margin-bottom:16px;line-height:1.5;}
  input[type="text"],input[type="number"],input[type="date"],input[type="color"],input[type="range"],select,textarea{width:100%;padding:14px;border-radius:var(--radius-md);border:1px solid var(--border);font-size:15px;background:var(--bg);color:var(--text);transition:var(--transition);box-shadow:var(--shadow-sm);font-family:inherit;}
  input:focus,select:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 3px rgba(37,99,235,0.1);}
  .dark input:focus,.dark select:focus,.dark textarea:focus{box-shadow:0 0 0 3px rgba(96,165,250,0.2);}
  .row{display:flex;gap:12px;flex-wrap:wrap;}
  .row>*{flex:1;min-width:120px;}
  .primary{background:var(--accent);color:var(--bg);padding:10px 16px;border-radius:var(--radius-md);border:1px solid var(--accent);font-weight:700;cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-sm); text-decoration:none;}
  .primary:hover{transform:translateY(-2px);box-shadow:var(--shadow-md);}
  .primary:disabled{opacity:0.6;cursor:not-allowed;transform:none;}
  .ghost{background:var(--bg);color:var(--text);border:1px solid var(--border);padding:10px 14px;border-radius:var(--radius-md);cursor:pointer;transition:var(--transition);box-shadow:var(--shadow-sm); text-decoration:none;}
  .ghost:hover{background:var(--accent);color:var(--bg);transform:translateY(-2px);box-shadow:var(--shadow-md);}
  .result{margin-top:16px;font-weight:700;color:var(--text);border-top:1px solid var(--border);padding-top:14px;font-size:16px;min-height:24px;display:flex;align-items:center;gap:8px;}
  .result .icon{font-size:18px;}
  .result.success{color:var(--success);}
  .result.warning{color:var(--warning);}
  .result.error{color:var(--error);}
  aside{align-self:start;position:relative;}
  .feature-panel{background:var(--card);border-radius:var(--radius-xl);border:1px solid var(--border);padding:24px;box-shadow:var(--shadow-md);}
  @media(min-width:981px){.feature-panel{position:sticky;top:20px;max-height:calc(100vh - 40px);overflow:auto;}}
  .panel-title{font-weight:800;margin:6px 6px 14px 6px;font-size:20px;letter-spacing:-0.5px;display:flex;align-items:center;gap:8px;}
  .features{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
  @media(max-width:700px){.features{grid-template-columns:1fr;}}
  .feature{display:flex;gap:14px;align-items:center;padding:18px;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--card);min-height:110px;transition:var(--transition);}
  .feature:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg);}
  .f-icon{width:48px;height:48px;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--bg);background:var(--accent);flex-shrink:0;font-size:18px;}
  .f-title{font-weight:700;margin-bottom:4px;}
  .f-desc{color:var(--muted);font-size:13px;line-height:1.5;}
  .useful-tips{margin-top:20px;padding:18px;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg);}
  .useful-tips h3{margin:0 0 12px 0;font-weight:800;font-size:16px;display:flex;align-items:center;gap:8px;}
  .useful-tips ul{margin:0;padding-left:20px;}
  .useful-tips li{margin:8px 0;color:var(--muted);font-size:14px;line-height:1.5;}
  .useful-tips li strong{color:var(--text);}
  footer{margin-top:24px;padding:24px;border-radius:var(--radius-xl);background:var(--card);border:1px solid var(--border);text-align:center;box-shadow:var(--shadow-md);}
  .visit{padding:12px 24px;border-radius:var(--radius-md);display:inline-block;background:var(--accent);color:var(--bg);font-weight:800;text-decoration:none;transition:var(--transition);box-shadow:var(--shadow-sm);}
  .visit:hover{transform:translateY(-3px) scale(1.02);box-shadow:var(--shadow-lg);}
  .muted{color:var(--muted);font-size:14px;line-height:1.5;}
  .spacer{height:10px}
  .sidebar{position:fixed;top:0;right:0;height:100vh;width:380px;max-width:94vw;transform:translateX(120%);transition:transform .28s cubic-bezier(.2,.9,.3,1);z-index:1000;background:var(--card);border-left:1px solid var(--border);padding:24px;overflow:auto;box-shadow:var(--shadow-lg);}
  .sidebar.open{transform:translateX(0);}
  .close{display:flex;justify-content:flex-end;}
  .nav-list{margin-top:16px;display:flex;flex-direction:column;gap:8px}
  .nav-list a{display:block;padding:14px;border-radius:var(--radius-md);border:1px solid var(--border);background:var(--bg);color:var(--text);font-weight:600;transition:var(--transition);box-shadow:var(--shadow-sm); text-decoration:none;}
  .nav-list a:hover{background:var(--accent);color:var(--bg);transform:translateX(-6px);box-shadow:var(--shadow-md);}
  .backup{margin-top:18px;color:var(--muted);font-size:13px;border-top:1px solid var(--border);padding-top:12px;line-height:1.5;}
  .toast{position:fixed;bottom:24px;right:24px;padding:16px 20px;border-radius:var(--radius-lg);background:var(--card);border:1px solid var(--border);box-shadow:var(--shadow-lg);transform:translateY(120px);transition:transform .3s cubic-bezier(.2,.9,.3,1);z-index:1001;font-weight:600;display:flex;align-items:center;gap:10px;max-width:320px;}
  .toast.show{transform:translateY(0);}
  .toast .icon{font-size:20px;}
  @media(max-width:480px){.hero .big{font-size:28px;}.container{padding:12px;}.header{top:12px;padding:12px 16px;}.grid{gap:16px;}.card{padding:20px;}}
  ::-webkit-scrollbar{width:8px;height:8px;}::-webkit-scrollbar-track{background:var(--bg);}::-webkit-scrollbar-thumb{background:var(--border);border-radius:4px;}::-webkit-scrollbar-thumb:hover{background:var(--muted);}

  /* Crypto-specific styles */
  .crypto-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:12px;}
  .coin-main{display:flex;align-items:center;gap:12px;}
  .coin-icon{width:48px;height:48px;border-radius:50%;background:var(--key-bg);display:flex;align-items:center;justify-content:center;overflow:hidden;}
  .coin-icon img{width:100%;height:100%;object-fit:contain;}
  .coin-title{font-size:28px;font-weight:800;color:var(--accent);margin:0;}
  .coin-symbol{font-size:18px;color:var(--muted);font-weight:600;}
  .price-display{font-size:36px;font-weight:800;margin:12px 0;color:var(--text);}
  .price-change{font-size:18px;font-weight:700;padding:4px 10px;border-radius:var(--radius-sm);display:inline-block;}
  .price-change.positive{background:var(--success);color:white;}
  .price-change.negative{background:var(--error);color:white;}
  .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:16px;}
  .stat-item{padding:14px;border:1px solid var(--border);border-radius:var(--radius-md);background:var(--bg);}
  .stat-label{font-size:12px;color:var(--muted);margin-bottom:4px;text-transform:uppercase;font-weight:600;letter-spacing:0.5px;}
  .stat-value{font-size:16px;font-weight:700;color:var(--text);}
  .rank-badge{display:inline-block;padding:4px 10px;border-radius:var(--radius-sm);background:var(--accent);color:var(--bg);font-size:12px;font-weight:700;margin-left:8px;}
  .loading-spinner{display:inline-block;width:20px;height:20px;border:3px solid var(--border);border-top:3px solid var(--accent);border-radius:50%;animation:spin 1s linear infinite;margin-left:8px;}
  @keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
  .no-results{text-align:center;color:var(--muted);padding:40px;font-style:italic;}
  
  /* Top 500 Table */
  .top500-table{max-height:500px;overflow:auto;border:1px solid var(--border);border-radius:var(--radius-md);margin-top:16px;}
  .top500-header{display:grid;grid-template-columns: 60px 1fr 120px 100px 120px 140px;background:var(--key-bg);padding:12px;font-weight:700;font-size:12px;text-transform:uppercase;color:var(--muted);position:sticky;top:0;border-bottom:1px solid var(--border);}
  .top500-row{display:grid;grid-template-columns: 60px 1fr 120px 100px 120px 140px;padding:12px;border-bottom:1px solid var(--border);align-items:center;transition:var(--transition);}
  .top500-row:hover{background:var(--key-bg);}
  .top500-rank{text-align:center;font-weight:700;}
  .top500-name{display:flex;align-items:center;gap:8px;}
  .top500-icon{width:24px;height:24px;border-radius:50%;overflow:hidden;}
  .top500-icon img{width:100%;height:100%;object-fit:contain;}
  .top500-price{text-align:right;font-weight:600;}
  .top500-change{text-align:right;font-weight:700;}
  .top500-change.up{color:var(--success);}
  .top500-change.down{color:var(--error);}
  .top500-mcap{text-align:right;color:var(--muted);}
  .top500-volume{text-align:right;color:var(--muted);}
  
  /* Chat Widget */
  .chat-widget{position:fixed;bottom:20px;right:20px;z-index:999;width:350px;max-width:90vw;height:450px;display:flex;flex-direction:column;transition:var(--transition);transform:translateY(20px);opacity:0;pointer-events:none;}
  .chat-widget.open{transform:translateY(0);opacity:1;pointer-events:all;}
  .chat-header{padding:14px;border-radius:var(--radius-md) var(--radius-md) 0 0;background:var(--accent);color:var(--bg);font-weight:800;display:flex;align-items:center;justify-content:space-between;border:1px solid var(--border);border-bottom:none;}
  .chat-messages{flex:1;padding:14px;background:var(--card);border-left:1px solid var(--border);border-right:1px solid var(--border);overflow:auto;display:flex;flex-direction:column;gap:8px;}
  .chat-input-container{display:flex;padding:12px;background:var(--card);border:1px solid var(--border);border-radius:0 0 var(--radius-md) var(--radius-md);gap:8px;}
  .chat-input{flex:1;padding:10px;border:1px solid var(--border);border-radius:var(--radius-sm);font-family:inherit;}
  .chat-send{padding:10px 16px;background:var(--accent);color:var(--bg);border:none;border-radius:var(--radius-sm);font-weight:700;cursor:pointer;}
  .chat-message{display:flex;gap:8px;max-width:85%;}
  .chat-message.user{align-self:flex-end;flex-direction:row-reverse;}
  .chat-message.bot{align-self:flex-start;}
  .chat-bubble{padding:10px 14px;border-radius:var(--radius-md);word-wrap:break-word;}
  .chat-message.user .chat-bubble{background:var(--accent);color:var(--bg);border-bottom-right-radius:4px;}
  .chat-message.bot .chat-bubble{background:var(--key-bg);color:var(--text);border-bottom-left-radius:4px;}
  .chat-toggle{position:fixed;bottom:20px;right:20px;z-index:998;width:56px;height:56px;border-radius:50%;background:var(--accent);color:var(--bg);display:flex;align-items:center;justify-content:center;font-size:24px;cursor:pointer;box-shadow:var(--shadow-lg);transition:var(--transition);}
  .chat-toggle:hover{transform:scale(1.1) rotate(5deg);}
  .brand a{text-decoration:none !important;}
</style>
</head>
<body>
<div class="container">
  <a href="#main-content" class="sr-only">Skip to main content</a>
  <header class="header" role="banner">
    <div class="brand">
      <a href="index.html" aria-label="Home" style="display:flex;align-items:center;gap:12px;text-decoration:none;">
        <div class="logo" aria-hidden="true">PR</div>
        <div class="brand-title">
          <div class="title-strong">Crypto</div>
          <div class="by">by PirateRuler.com</div>
        </div>
      </a>
    </div>
    <div class="header-actions">
      <div class="theme-toggle" id="themeBtn" title="Toggle dark mode" aria-label="Toggle dark mode">
        <div class="theme-slider-thumb">üåô</div>
      </div>
      <div class="hamb" id="hambBtn" title="Open menu" aria-haspopup="true" aria-controls="sidebar">‚ò∞</div>
    </div>
  </header>

  <section class="hero" aria-labelledby="heroTitle">
    <h1 id="heroTitle" class="big">Live Cryptocurrency Market</h1>
    <p class="small">Get real-time prices, market caps, 24h changes, and detailed analytics for top 500 cryptocurrencies. Private, secure, and unlimited by PirateRuler.com.</p>
  </section>

  <main id="main-content" class="grid">
    <div>
      <section id="crypto" class="card">
        <h2>üîç Crypto Price Lookup</h2>
        <div class="hint">Enter a cryptocurrency name or symbol below and click search to get live market data.</div>
        
        <input type="text" id="searchCrypto" placeholder="Enter crypto (e.g., 'bitcoin', 'btc', 'ethereum')..." style="margin-bottom:16px;" autocomplete="off" />

        <button class="primary" id="searchBtn" onclick="searchCrypto()" style="width:100%;margin-bottom:16px;">Search Crypto</button>
        
        <div id="cryptoResult" style="min-height:100px;">
          <div class="no-results">Enter a cryptocurrency above to see detailed live data</div>
        </div>
        
        <div class="action-controls" style="margin-top:16px;display:flex;gap:12px;flex-wrap:wrap;">
          <button class="ghost" id="copyInfoBtn" title="Copy coin information" disabled>üìã Copy Info</button>
          <button class="ghost" id="openChartBtn" title="View on CoinGecko" disabled>üìà View Chart</button>
        </div>
        
        <div class="result" id="cryptoRes" style="margin-top:12px;"></div>
      </section>

      <section id="top500" class="card" style="margin-top:24px;">
        <h2>üìä Top 500 Cryptocurrencies</h2>
        <div class="hint">Live market data for the top 500 cryptocurrencies by market capitalization. Prices update in real-time.</div>
        <div id="top500Table" class="top500-table">
          <div style="text-align:center;padding:40px;color:var(--muted);">Loading market data...</div>
        </div>
        <div class="result" id="top500Res" style="margin-top:12px;"></div>
      </section>
    </div>

    <aside>
      <div class="feature-panel">
        <div class="panel-title">Why PirateRuler Crypto?</div>
        <div class="features">
          <div class="feature">
            <div class="f-icon">üí∞</div>
            <div>
              <div class="f-title">Live Price Data</div>
              <div class="f-desc">Real-time cryptocurrency prices with 24h/7d/30d/1y changes and market trends.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üìä</div>
            <div>
              <div class="f-title">Complete Market Stats</div>
              <div class="f-desc">Market cap, volume, supply metrics, ATH/ATL, and fully diluted valuation.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üó£Ô∏è</div>
            <div>
              <div class="f-title">Built-in Chat</div>
              <div class="f-desc">Discuss crypto trends with other users in real-time chat.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üîí</div>
            <div>
              <div class="f-title">Private & Secure</div>
              <div class="f-desc">Your searches are not stored. All queries are processed securely.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">‚ö°</div>
            <div>
              <div class="f-title">Lightning Fast</div>
              <div class="f-desc">Get crypto data in seconds with our optimized CoinGecko API integration.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üì±</div>
            <div>
              <div class="f-title">Mobile Friendly</div>
              <div class="f-desc">Track crypto on the go with perfect mobile and desktop support.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üåê</div>
            <div>
              <div class="f-title">Free & Unlimited</div>
              <div class="f-desc">No usage limits. Track as many coins as you need, completely free.</div>
            </div>
          </div>
          <div class="feature">
            <div class="f-icon">üè¥‚Äç‚ò†Ô∏è</div>
            <div>
              <div class="f-title">PirateRuler Quality</div>
              <div class="f-desc">Part of the trusted PirateRuler utility tools suite.</div>
            </div>
          </div>
        </div>
        
        <div class="useful-tips">
          <h3>üí° Crypto Search Tips</h3>
          <ul>
            <li><strong>Search by name:</strong> Try 'bitcoin', 'ethereum', 'cardano'</li>
            <li><strong>Search by symbol:</strong> Short codes like 'btc', 'eth', 'ada' work too</li>
            <li><strong>Case insensitive:</strong> Searches work with uppercase or lowercase</li>
            <li><strong>Top 500:</strong> View live data for the top 500 cryptocurrencies</li>
            <li><strong>Detailed metrics:</strong> Supply data, ROI, genesis date, and more</li>
            <li><strong>Privacy first:</strong> Your searches are never stored or logged</li>
            <li><strong>Real-time data:</strong> Prices update with live market movements</li>
            <li><strong>API powered:</strong> Uses free CoinGecko API - no registration needed</li>
          </ul>
        </div>
        
        <div class="spacer"></div>
        <div class="feature" style="min-height:unset;align-items:flex-start;padding:14px">
          <div class="f-icon">PR</div>
          <div>
            <div class="f-title">Crypto By PirateRuler.com</div>
            <div class="f-desc" style="margin-top:6px;display:flex;gap:10px;flex-wrap:wrap;">
              <a class="btn" href="https://pirateruler.com/post/about.html" target="_blank" rel="noopener">About ‚Äî PirateRuler</a>
              <a class="btn" href="https://pirateruler.com/post/privacy.html" target="_blank" rel="noopener">Privacy Policy</a>
              <a class="btn" href="https://pirateruler.com/post/contact.html" target="_blank" rel="noopener">Contact</a>
              <a class="btn" href="https://pirateruler.com/post/terms.html" target="_blank" rel="noopener">Terms & Service</a>
            </div>
          </div>
        </div>
      </div>
    </aside>
  </main>

  <footer>
    <a class="visit" href="https://pirateruler.com" target="_blank" rel="noopener">Visit PirateRuler.com</a>
    <div style="height:12px"></div>
    <small class="muted">¬© <span id="year"></span> Crypto By PirateRuler.com ‚Äî Backup & resources: pirateruler.com | <span id="pwa-status"></span></small>
  </footer>
</div>

<aside id="sidebar" class="sidebar" role="dialog">
  <div class="close"><button class="ghost" id="closeSidebar">Close ‚úï</button></div>
  <h3>PirateRuler Links</h3>
  <p class="muted">Quick links & backup resources</p>
  <nav class="nav-list">
    <a href="https://pirateruler.com/post/about.html" target="_blank" rel="noopener">About ‚Äî PirateRuler</a>
    <a href="https://pirateruler.com/post/privacy.html" target="_blank" rel="noopener">Privacy Policy</a>
    <a href="https://pirateruler.com/post/contact.html" target="_blank" rel="noopener">Contact</a>
    <a href="https://pirateruler.com/post/terms.html" target="_blank" rel="noopener">Terms & Service</a>
  </nav>
  <div class="backup">
    If this site is offline you can visit PirateRuler for backups & resources:<br><a href="https://pirateruler.com" target="_blank">pirateruler.com</a>
  </div>
</aside>

<!-- Chat Widget -->
<div class="chat-toggle" id="chatToggle" title="Open chat">üí¨</div>
<div class="chat-widget" id="chatWidget">
  <div class="chat-header">
    <div>üí¨ Crypto Chat</div>
    <button class="ghost" id="closeChat" style="padding:6px 10px;font-size:12px;">‚úï</button>
  </div>
  <div class="chat-messages" id="chatMessages"></div>
  <div class="chat-input-container">
    <input type="text" class="chat-input" id="chatInput" placeholder="Type a message..." maxlength="200">
    <button class="chat-send" id="chatSend">Send</button>
  </div>
</div>

<div id="toast" class="toast" role="status"></div>

<script>
  // Year & PWA Status
  document.getElementById('year').textContent = new Date().getFullYear();
  if('serviceWorker' in navigator) document.getElementById('pwa-status').textContent = 'PWA Ready';

  // Theme Toggle
  const themeToggle = document.getElementById('themeBtn');
  const themeThumb = themeToggle.querySelector('.theme-slider-thumb');
  function toggleTheme() {
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    themeToggle.classList.toggle('active', isDark);
    themeThumb.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
    document.querySelector('meta[name="theme-color"]').setAttribute('content', isDark ? '#000000' : '#ffffff');
  }
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') { document.documentElement.classList.add('dark'); themeToggle.classList.add('active'); themeThumb.textContent = '‚òÄÔ∏è'; }
  themeToggle.addEventListener('click', toggleTheme);

  // Sidebar
  const sidebar = document.getElementById('sidebar');
  const hambBtn = document.getElementById('hambBtn');
  const closeSidebar = document.getElementById('closeSidebar');
  function openSidebar(){ sidebar.classList.add('open'); sidebar.setAttribute('aria-hidden','false'); closeSidebar.focus(); }
  function closeSB(){ sidebar.classList.remove('open'); sidebar.setAttribute('aria-hidden','true'); }
  hambBtn.addEventListener('click', openSidebar);
  closeSidebar.addEventListener('click', closeSB);
  document.addEventListener('keydown', e => { if(e.key === 'Escape') closeSB(); });
  document.addEventListener('click', e => { if(sidebar.classList.contains('open') && !sidebar.contains(e.target) && !hambBtn.contains(e.target)) closeSB(); });

  // Toast
  function showToast(message, icon = '‚ÑπÔ∏è') {
    const toast = document.getElementById('toast');
    toast.innerHTML = `<span class="icon">${icon}</span><span>${message}</span>`;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
  }

  // Utility Functions
  function setText(id,val,type=''){ 
    const el=document.getElementById(id); 
    if(el) { el.textContent = val; el.className = 'result ' + type; }
  }

  function formatNumber(num) {
    if (num >= 1e9) return `$${(num / 1e9).toFixed(2)}B`;
    if (num >= 1e6) return `$${(num / 1e6).toFixed(2)}M`;
    if (num >= 1e3) return `$${(num / 1e3).toFixed(2)}K`;
    return `$${num.toFixed(2)}`;
  }

  // Load Top 500 Cryptos on Page Load
  window.addEventListener('DOMContentLoaded', loadTop500);

  async function loadTop500() {
    const tableDiv = document.getElementById('top500Table');
    const resultDiv = document.getElementById('top500Res');
    
    try {
      const response = await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=500&page=1&sparkline=false&price_change_percentage=24h%2C7d%2C30d%2C1y');
      
      if (!response.ok) throw new Error('Failed to load top 500 data');
      
      const data = await response.json();
      
      let html = '<div class="top500-header">';
      html += '<div>Rank</div><div>Name</div><div>Price</div><div>24h %</div><div>Market Cap</div><div>Volume (24h)</div>';
      html += '</div>';
      
      data.forEach(coin => {
        const priceChange = coin.price_change_percentage_24h || 0;
        const changeClass = priceChange >= 0 ? 'up' : 'down';
        const changeSymbol = priceChange >= 0 ? 'üìà' : 'üìâ';
        
        html += '<div class="top500-row">';
        html += `<div class="top500-rank">#${coin.market_cap_rank}</div>`;
        html += `<div class="top500-name">`;
        if (coin.image) html += `<div class="top500-icon"><img src="${coin.image}" alt="${coin.name}"></div>`;
        html += `<div><div style="font-weight:700">${coin.name}</div><div style="font-size:12px;color:var(--muted)">${coin.symbol.toUpperCase()}</div></div>`;
        html += `</div>`;
        html += `<div class="top500-price">$${coin.current_price.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 6})}</div>`;
        html += `<div class="top500-change ${changeClass}">${changeSymbol} ${priceChange.toFixed(2)}%</div>`;
        html += `<div class="top500-mcap">${formatNumber(coin.market_cap)}</div>`;
        html += `<div class="top500-volume">${formatNumber(coin.total_volume)}</div>`;
        html += '</div>';
      });
      
      tableDiv.innerHTML = html;
      setText('top500Res', `‚úÖ Loaded top 500 cryptocurrencies`, 'success');
      
    } catch (error) {
      console.error('Top 500 load error:', error);
      tableDiv.innerHTML = `<div style="text-align:center;padding:40px;color:var(--error);">‚ùå Failed to load market data. Please refresh the page.</div>`;
      setText('top500Res', 'Failed to load data', 'error');
    }
  }

  // Crypto Search Function
  async function searchCrypto() {
    const searchQuery = document.getElementById('searchCrypto').value.trim();
    const searchBtn = document.getElementById('searchBtn');
    const resultDiv = document.getElementById('cryptoResult');
    
    if (!searchQuery) {
      setText('cryptoRes','Please enter a cryptocurrency name or symbol', 'warning');
      return;
    }

    // Disable button and show loading
    searchBtn.disabled = true;
    searchBtn.innerHTML = 'Searching...<span class="loading-spinner"></span>';
    resultDiv.innerHTML = '<div class="no-results">Searching for cryptocurrency data...</div>';
    setText('cryptoRes','');
    
    // Disable action buttons
    document.getElementById('copyInfoBtn').disabled = true;
    document.getElementById('openChartBtn').disabled = true;
    
    try {
      // First, search for the coin to get its ID
      const searchResponse = await fetch(`https://api.coingecko.com/api/v3/search?query=${encodeURIComponent(searchQuery)}`);
      if (!searchResponse.ok) throw new Error('Search failed');
      
      const searchData = await searchResponse.json();
      
      if (!searchData.coins || searchData.coins.length === 0) {
        throw new Error('Cryptocurrency not found. Check spelling or try another name/symbol.');
      }
      
      // Get the first result's ID and fetch detailed data
      const coinId = searchData.coins[0].id;
      const detailResponse = await fetch(`https://api.coingecko.com/api/v3/coins/${coinId}?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false`);
      
      if (!detailResponse.ok) throw new Error('Failed to fetch coin details');
      
      const data = await detailResponse.json();
      
      if (!data) throw new Error('No data found for this cryptocurrency');
      
      // Format and display the results
      displayCryptoResults(data);
      setText('cryptoRes','Data found! üìà', 'success');
      
      // Enable action buttons
      document.getElementById('copyInfoBtn').disabled = false;
      document.getElementById('openChartBtn').disabled = false;
      document.getElementById('openChartBtn').onclick = () => window.open(`https://www.coingecko.com/en/coins/${data.id}`, '_blank');
      
    } catch (error) {
      console.error('Crypto API error:', error);
      resultDiv.innerHTML = `<div class="no-results">‚ùå ${error.message}</div>`;
      setText('cryptoRes','Search failed', 'error');
    } finally {
      // Re-enable button
      searchBtn.disabled = false;
      searchBtn.textContent = 'Search Crypto';
    }
  }

  // Display crypto results with expanded details
  function displayCryptoResults(data) {
    const resultDiv = document.getElementById('cryptoResult');
    
    const marketData = data.market_data;
    const currentPrice = marketData.current_price?.usd || 0;
    const priceChange24h = marketData.price_change_percentage_24h || 0;
    const priceChange7d = marketData.price_change_percentage_7d || 0;
    const priceChange30d = marketData.price_change_percentage_30d || 0;
    const priceChange1y = marketData.price_change_percentage_1y || 0;
    const marketCap = marketData.market_cap?.usd || 0;
    const volume = marketData.total_volume?.usd || 0;
    const circulatingSupply = marketData.circulating_supply || 0;
    const maxSupply = marketData.max_supply || 0;
    const totalSupply = marketData.total_supply || 0;
    const ath = marketData.ath?.usd || 0;
    const atl = marketData.atl?.usd || 0;
    const athChange = marketData.ath_change_percentage?.usd || 0;
    const atlChange = marketData.atl_change_percentage?.usd || 0;
    const fdv = marketData.fully_diluted_valuation?.usd || 0;
    const high24h = marketData.high_24h?.usd || 0;
    const low24h = marketData.low_24h?.usd || 0;
    
    let html = '';
    
    // Header with icon and name
    html += '<div class="crypto-header">';
    html += '<div class="coin-main">';
    if (data.image?.thumb) {
      html += `<div class="coin-icon"><img src="${data.image.thumb}" alt="${data.name}"></div>`;
    }
    html += '<div>';
    html += `<h2 class="coin-title">${data.name}<span class="rank-badge">Rank #${data.market_cap_rank}</span></h2>`;
    html += `<div class="coin-symbol">${data.symbol?.toUpperCase()}</div>`;
    html += '</div>';
    html += '</div>';
    html += '</div>';
    
    // Price display
    html += `<div class="price-display">$${currentPrice.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 6})}</div>`;
    
    // Price changes
    html += '<div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px;">';
    const change24hClass = priceChange24h >= 0 ? 'positive' : 'negative';
    html += `<div class="price-change ${change24hClass}">24h: ${priceChange24h >= 0 ? '+' : ''}${priceChange24h.toFixed(2)}%</div>`;
    const change7dClass = priceChange7d >= 0 ? 'positive' : 'negative';
    html += `<div class="price-change ${change7dClass}">7d: ${priceChange7d >= 0 ? '+' : ''}${priceChange7d.toFixed(2)}%</div>`;
    const change30dClass = priceChange30d >= 0 ? 'positive' : 'negative';
    html += `<div class="price-change ${change30dClass}">30d: ${priceChange30d >= 0 ? '+' : ''}${priceChange30d.toFixed(2)}%</div>`;
    const change1yClass = priceChange1y >= 0 ? 'positive' : 'negative';
    html += `<div class="price-change ${change1yClass}">1y: ${priceChange1y >= 0 ? '+' : ''}${priceChange1y.toFixed(2)}%</div>`;
    html += '</div>';
    
    // 24h High/Low
    html += '<div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;">';
    html += `<div class="stat-item" style="margin:0;"><div class="stat-label">24h High</div><div class="stat-value" style="color:var(--success);">$${high24h.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 6})}</div></div>`;
    html += `<div class="stat-item" style="margin:0;"><div class="stat-label">24h Low</div><div class="stat-value" style="color:var(--error);">$${low24h.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 6})}</div></div>`;
    html += '</div>';
    
    // Main stats grid
    html += '<div class="stats-grid">';
    html += `<div class="stat-item"><div class="stat-label">Market Cap</div><div class="stat-value">${formatNumber(marketCap)}</div></div>`;
    html += `<div class="stat-item"><div class="stat-label">Fully Diluted Valuation</div><div class="stat-value">${formatNumber(fdv)}</div></div>`;
    html += `<div class="stat-item"><div class="stat-label">24h Volume</div><div class="stat-value">${formatNumber(volume)}</div></div>`;
    html += `<div class="stat-item"><div class="stat-label">Circulating Supply</div><div class="stat-value">${circulatingSupply.toLocaleString()} ${data.symbol?.toUpperCase()}</div></div>`;
    if (maxSupply) {
      html += `<div class="stat-item"><div class="stat-label">Max Supply</div><div class="stat-value">${maxSupply.toLocaleString()} ${data.symbol?.toUpperCase()}</div></div>`;
    }
    if (totalSupply) {
      html += `<div class="stat-item"><div class="stat-label">Total Supply</div><div class="stat-value">${totalSupply.toLocaleString()} ${data.symbol?.toUpperCase()}</div></div>`;
    }
    html += '</div>';
    
    // All-Time High/Low
    html += '<div style="margin-top:16px;display:grid;grid-template-columns:1fr 1fr;gap:12px;">';
    html += `<div class="stat-item" style="margin:0;"><div class="stat-label">All-Time High</div><div class="stat-value">$${ath.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</div><div style="font-size:12px;color:var(--muted);margin-top:4px;">${athChange.toFixed(2)}% from ATH</div></div>`;
    html += `<div class="stat-item" style="margin:0;"><div class="stat-label">All-Time Low</div><div class="stat-value">$${atl.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 6})}</div><div style="font-size:12px;color:var(--muted);margin-top:4px;">${Math.abs(atlChange).toFixed(2)}% from ATL</div></div>`;
    html += '</div>';
    
    // Additional info
    if (data.genesis_date || data.asset_platform_id) {
      html += '<div style="margin-top:16px;padding:14px;background:var(--bg);border-radius:var(--radius-md);border:1px solid var(--border);">';
      if (data.genesis_date) html += `<div style="font-size:13px;margin-bottom:6px;"><strong>Genesis Date:</strong> ${new Date(data.genesis_date).toLocaleDateString()}</div>`;
      if (data.asset_platform_id) html += `<div style="font-size:13px;margin-bottom:6px;"><strong>Platform:</strong> ${data.asset_platform_id.charAt(0).toUpperCase() + data.asset_platform_id.slice(1)}</div>`;
      html += '</div>';
    }
    
    // Links
    if (data.links?.homepage?.[0] || data.links?.blockchain_site?.[0]) {
      html += '<div style="margin-top:16px;display:flex;gap:8px;flex-wrap:wrap;">';
      if (data.links.homepage?.[0]) html += `<a href="${data.links.homepage[0]}" target="_blank" class="btn" style="padding:8px 12px;font-size:13px;">üè† Homepage</a>`;
      if (data.links.blockchain_site?.[0]) html += `<a href="${data.links.blockchain_site[0]}" target="_blank" class="btn" style="padding:8px 12px;font-size:13px;">üîó Explorer</a>`;
      html += '</div>';
    }
    
    resultDiv.innerHTML = html;
  }

  // Keyboard shortcut for search (Enter)
  document.getElementById('searchCrypto').addEventListener('keydown', e => {
    if (e.key === 'Enter') {
      e.preventDefault();
      searchCrypto();
    }
  });

  // Clear result when new input
  document.getElementById('searchCrypto').addEventListener('input', () => {
    setText('cryptoRes','');
  });

  // Copy info button
  document.getElementById('copyInfoBtn').addEventListener('click', () => {
    const resultText = document.getElementById('cryptoResult').textContent;
    if (resultText && resultText !== 'Enter a cryptocurrency above to see detailed live data' && resultText !== 'Searching for cryptocurrency data...') {
      navigator.clipboard.writeText(resultText).then(() => showToast('Coin info copied to clipboard', 'üìã'));
    }
  });

  // Chat Widget
  const chatToggle = document.getElementById('chatToggle');
  const chatWidget = document.getElementById('chatWidget');
  const closeChat = document.getElementById('closeChat');
  const chatMessages = document.getElementById('chatMessages');
  const chatInput = document.getElementById('chatInput');
  const chatSend = document.getElementById('chatSend');

  // Load chat history from localStorage
  let chatHistory = JSON.parse(localStorage.getItem('cryptoChatHistory') || '[]');

  function openChat() {
    chatWidget.classList.add('open');
    chatToggle.style.display = 'none';
    renderChatMessages();
    chatInput.focus();
  }

  function closeChatWidget() {
    chatWidget.classList.remove('open');
    chatToggle.style.display = 'flex';
  }

  function addChatMessage(message, sender) {
    chatHistory.push({ message, sender, timestamp: new Date().toISOString() });
    // Keep only last 50 messages
    if (chatHistory.length > 50) chatHistory = chatHistory.slice(-50);
    localStorage.setItem('cryptoChatHistory', JSON.stringify(chatHistory));
    renderChatMessages();
  }

  function renderChatMessages() {
    chatMessages.innerHTML = '';
    chatHistory.slice(-20).forEach(msg => {
      const messageEl = document.createElement('div');
      messageEl.className = `chat-message ${msg.sender}`;
      messageEl.innerHTML = `<div class="chat-bubble">${escapeHtml(msg.message)}</div>`;
      chatMessages.appendChild(messageEl);
    });
    chatMessages.scrollTop = chatMessages.scrollHeight;
  }

  function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
  }

  function simulateBotResponse(message) {
    const lowerMsg = message.toLowerCase();
    let response = "Thanks for your message! Keep an eye on the market trends. üìä";
    
    if (lowerMsg.includes('bitcoin') || lowerMsg.includes('btc')) {
      response = "Bitcoin (BTC) is the original cryptocurrency. Check its live price and 24h change above! ü™ô";
    } else if (lowerMsg.includes('ethereum') || lowerMsg.includes('eth')) {
      response = "Ethereum (ETH) powers smart contracts and DeFi. Keep track of its market performance! üî∑";
    } else if (lowerMsg.includes('hello') || lowerMsg.includes('hi')) {
      response = "Hello! Ready to discuss crypto? Check the top 500 list for trending coins. üëã";
    } else if (lowerMsg.includes('moon') || lowerMsg.includes('pump')) {
      response = "üöÄ To the moon! But remember to do your own research (DYOR).";
    } else if (lowerMsg.includes('thanks') || lowerMsg.includes('thank you')) {
      response = "You're welcome! Happy trading! üè¥‚Äç‚ò†Ô∏è";
    } else if (lowerMsg.includes('price') || lowerMsg.includes('cost')) {
      response = "Search any coin above to see live price data, 24h changes, and market stats!";
    } else if (lowerMsg.includes('top 500')) {
      response = "The Top 500 list shows live market data for the biggest cryptocurrencies by market cap.";
    }
    
    setTimeout(() => {
      addChatMessage(`Bot: ${response}`, 'bot');
    }, 1000 + Math.random() * 2000);
  }

  chatToggle.addEventListener('click', openChat);
  closeChat.addEventListener('click', closeChatWidget);

  function sendChatMessage() {
    const message = chatInput.value.trim();
    if (!message) return;
    
    addChatMessage(`You: ${message}`, 'user');
    chatInput.value = '';
    
    // Simulate bot response
    simulateBotResponse(message);
  }

  chatSend.addEventListener('click', sendChatMessage);
  chatInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') sendChatMessage();
  });

  // Add welcome bot message if first time
  if (chatHistory.length === 0) {
    addChatMessage("Bot: Welcome to PirateRuler Crypto Chat! Discuss coins, prices, and market trends here. Start by searching any cryptocurrency above! üè¥‚Äç‚ò†Ô∏è", 'bot');
  }
</script>
</body>
</html>
